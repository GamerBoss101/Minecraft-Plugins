package ml.bosstop.deathrun.Listeners;

import java.util.logging.Logger;

import org.bukkit.Bukkit;
import org.bukkit.ChatColor;
import org.bukkit.entity.Player;
import org.bukkit.event.EventHandler;
import org.bukkit.event.Listener;
import org.bukkit.event.player.PlayerJoinEvent;
import org.bukkit.scoreboard.Scoreboard;
import org.bukkit.scoreboard.Team;

import ml.bosstop.deathrun.Main;

public class Tag implements Listener {
	
	Logger log = Bukkit.getServer().getLogger();
	
    @EventHandler
    public static void onJoin (PlayerJoinEvent event) {
        Bukkit.getScoreboardManager().getMainScoreboard().getTeam("nt-" + event.getPlayer().getName()).addEntry(event.getPlayer().getName());
    }

    public static void init () {
        assert Bukkit.getScoreboardManager() != null;
        Scoreboard s = Bukkit.getScoreboardManager().getMainScoreboard();
        String name = "nt-" + "";
        s.registerNewTeam(name);
        Team t = s.getTeam(name);
        assert t != null;
        t.setColor(g.color);
        t.setPrefix(g.prefix);
        t.setSuffix(g.suffix);
    }
    
    public static void clean () {
        if (Bukkit.getScoreboardManager() == null ) {
        	log.info("Scoreboard manager is not defined!", ChatColor.RED);
            return;
        }
        for (Team t: Bukkit.getScoreboardManager().getMainScoreboard().getTeams()) if (t.getName().contains("nt-")) t.unregister();
    }

}
